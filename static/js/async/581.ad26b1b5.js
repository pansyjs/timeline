"use strict";(self.webpackChunk_pansy_react_timeline=self.webpackChunk_pansy_react_timeline||[]).push([["581"],{1234:function(t,e,s){s.r(e),s.d(e,{default:()=>n});var i=s(2676),r=s(5271),o=s(1269);s(4019);let n=function(){let t=r.useRef(null);return r.useEffect(()=>{let e=t.current;if(e){let t=new o.TY(e,[],{showCurrentTime:!1,hiddenDates:[{start:"2025-08-07 00:00:00",end:"2025-08-08 00:00:00"}]});return()=>{t.destroy()}}},[]),(0,i.jsx)("div",{ref:t})}},7310:function(t,e,s){s.r(e),s.d(e,{default:()=>z});var i=s(2676),r=s(5271);let o="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;var n=s(833),h=s(2802),a=s(7018),d=s(4285),l=s(7977),c=s(5885),u=s(6483),p=s.n(u),m=s(8881),f=s.n(m),g=s(2098),v=s.n(g);let y={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"DD",week:"w",month:"MM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"MM-DD HH:mm:00",minute:"MM-DD HH:00",hour:"MM-DD",weekday:"MMMM YYYY",day:"YYYY-MM",week:"MMMM YYYY",month:"YYYY",year:""}};var b=s(2778),w=s.n(b);function _(t,e,s){let i=0,r=p()(s).toDate().valueOf();for(let s=0;s<t.length;s++){let o=t[s].start,n=t[s].end;o>=e.start&&n<e.end&&r>=n&&(i+=n-o)}return i}function D(t,e){let s,i;for(let r=0;r<e.length;r++)if(s=e[r].start,i=e[r].end,t>=s&&t<i)return{hidden:!0,startDate:s,endDate:i};return{hidden:!1,startDate:s,endDate:i}}function C(t,e,s,i){let r=D(e,t);if(!0!==r.hidden)return e;if(s<0)if(!0===i)return r.startDate-(r.endDate-e)-1;else return r.startDate-1;return!0===i?r.endDate+(e-r.startDate)+1:r.endDate+1}function M(t,e,s){return s=p()(s).toDate().valueOf(),s-=_(t,e,s)}function k(t,e,s){let i=0;for(let r=0;r<t.length;r++){let o=t[r].start,n=t[r].end;o>=e&&n<s&&(i+=n-o)}return i}p().extend(w()),p().extend(v()),p().extend(f());class T{setRange(t,e,s){if(!(t instanceof Date)||!(e instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!==t?p()(t.valueOf()):this._start,this._end=void 0!==e?p()(e.valueOf()):this._end,this.autoScale&&this.setMinimumStep(s)}start(){this.current=this._start.clone(),this.roundToMinor()}getCurrent(){return this.current.clone()}getLabelMinor(t){if(void 0===t&&(t=this.current),t instanceof Date&&(t=p()(t)),"function"==typeof this.format.minorLabels)return this.format.minorLabels(t,this.scale,this.step);let e=this.format.minorLabels[this.scale];return"week"===this.scale&&1===t.date()&&0!==t.weekday()?"":e&&e.length>0?p()(t).format(e):""}getLabelMajor(t){if(void 0===t&&(t=this.current),t instanceof Date&&(t=p()(t)),"function"==typeof this.format.majorLabels)return this.format.majorLabels(t,this.scale,this.step);let e=this.format.majorLabels[this.scale];return e&&e.length>0?p()(t).format(e):""}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){let t=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),6>this.current.month()?this.current=this.current.subtract(this.current.hour()%this.step,"hour"):this.current.hour()%this.step!=0&&(this.current=this.current.add(this.step-this.current.hour()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(0!==this.current.weekday())this.current=this.current.weekday(0).add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current=this.current.add(this.step,"week");else{let t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year")}if(1!==this.step)switch(this.scale){case"millisecond":this.current.millisecond()>0&&this.current.millisecond()<this.step&&(this.current=this.current.millisecond(0));break;case"second":this.current.second()>0&&this.current.second()<this.step&&(this.current=this.current.second(0));break;case"minute":this.current.minute()>0&&this.current.minute()<this.step&&(this.current=this.current.minute(0));break;case"hour":this.current.hour()>0&&this.current.hour()<this.step&&(this.current=this.current.hour(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0))}this.current.valueOf()===t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1}isMajor(){if(!0===this.switchedYear)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}if(!0===this.switchedMonth)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}if(!0===this.switchedDay)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}let t=p()(this.current);switch(this.scale){case"millisecond":return 0===t.millisecond();case"second":return 0===t.second();case"minute":return 0===t.hour()&&0===t.minute();case"hour":return 0===t.hour();case"weekday":case"day":return this.options.showWeekScale?1===t.isoWeekday():1===t.date();case"week":return 1===t.date();case"month":return 0===t.month();default:return!1}}getClassName(){let t=p()(this.current),e=this.step,s=[];function i(t){return t/e%2==0?" vis-even":" vis-odd"}function r(t){return t.isSame(Date.now(),"day")?" vis-today":t.isSame(p()().add(1,"day"),"day")?" vis-tomorrow":t.isSame(p()().add(-1,"day"),"day")?" vis-yesterday":""}function o(t){return t.isSame(Date.now(),"month")?" vis-current-month":""}switch(this.scale){case"millisecond":s.push(r(t)),s.push(i(t.millisecond()));break;case"second":s.push(r(t)),s.push(i(t.second()));break;case"minute":s.push(r(t)),s.push(i(t.minute()));break;case"hour":s.push(`vis-h${t.hour()}${4===this.step?`-h${t.hour()+4}`:""}`),s.push(r(t)),s.push(i(t.hour()));break;case"weekday":s.push(`vis-${t.format("dddd").toLowerCase()}`),s.push(r(t)),s.push(t.isSame(Date.now(),"week")?" vis-current-week":""),s.push(i(t.date()));break;case"day":s.push(`vis-day${t.date()}`),s.push(`vis-${t.format("MMMM").toLowerCase()}`),s.push(r(t)),s.push(o(t)),s.push(this.step<=2?r(t):""),s.push(this.step<=2?`vis-${t.format("dddd").toLowerCase()}`:""),s.push(i(t.date()-1));break;case"month":s.push(`vis-${t.format("MMMM").toLowerCase()}`),s.push(o(t)),s.push(i(t.month()));break;case"year":s.push(`vis-year${t.year()}`),s.push(t.isSame(Date.now(),"year")?" vis-current-year":""),s.push(i(t.year()))}return s.filter(String).join(" ")}roundToMinor(){switch("week"===this.scale&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hour(0);case"hour":this.current=this.current.minute(0);case"minute":this.current=this.current.second(0);case"second":this.current=this.current.millisecond(0)}if(1!==this.step){let t=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.millisecond()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.second()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minute()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hour()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year")}t.isSame(this.current)||(this.current=p()(C(this.hiddenDates,this.current.valueOf(),-1,!0)))}}setMinimumStep(t){void 0!==t&&(31104e9>t&&(this.scale="year",this.step=1e3),15552e9>t&&(this.scale="year",this.step=500),31104e8>t&&(this.scale="year",this.step=100),15552e8>t&&(this.scale="year",this.step=50),31104e7>t&&(this.scale="year",this.step=10),15552e7>t&&(this.scale="year",this.step=5),31104e6>t&&(this.scale="year",this.step=1),7776e6>t&&(this.scale="month",this.step=3),2592e6>t&&(this.scale="month",this.step=1),6048e5>t&&this.options.showWeekScale&&(this.scale="week",this.step=1),1728e5>t&&(this.scale="day",this.step=2),864e5>t&&(this.scale="day",this.step=1),144e5>t&&(this.scale="hour",this.step=4),36e5>t&&(this.scale="hour",this.step=1),9e5>t&&(this.scale="minute",this.step=15),6e5>t&&(this.scale="minute",this.step=10),3e5>t&&(this.scale="minute",this.step=5),6e4>t&&(this.scale="minute",this.step=1),15e3>t&&(this.scale="second",this.step=15),1e4>t&&(this.scale="second",this.step=10),5e3>t&&(this.scale="second",this.step=5),1e3>t&&(this.scale="second",this.step=1),200>t&&(this.scale="millisecond",this.step=200),100>t&&(this.scale="millisecond",this.step=100),50>t&&(this.scale="millisecond",this.step=50),10>t&&(this.scale="millisecond",this.step=10),5>t&&(this.scale="millisecond",this.step=5),1>t&&(this.scale="millisecond",this.step=1))}constructor(t,e,s,i,r){(0,n._)(this,"_start",void 0),(0,n._)(this,"_end",void 0),(0,n._)(this,"current",void 0),(0,n._)(this,"scale",void 0),(0,n._)(this,"step",void 0),(0,n._)(this,"options",void 0),(0,n._)(this,"autoScale",void 0),(0,n._)(this,"hiddenDates",void 0),(0,n._)(this,"switchedDay",void 0),(0,n._)(this,"switchedMonth",void 0),(0,n._)(this,"switchedYear",void 0),(0,n._)(this,"format",void 0),this.options=r||{},this.current=p()(),this._start=p()(),this._end=p()(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,s),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(i)?this.hiddenDates=i:void 0!==i?this.hiddenDates=[i]:this.hiddenDates=[],this.format=y}}class x{setOptions(t){t&&(0,a.l7)(this.options,t)}redraw(){return!1}destroy(){}_isResized(){let t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t}constructor(t,e){(0,n._)(this,"options",void 0),(0,n._)(this,"props",void 0),this.options=null,this.props=null}}let O=!1;class j extends x{_create(){if(!this.body)return;let{prefixCls:t}=this.body;this.dom.foreground=document.createElement("div"),this.dom.foreground.className=`${t}-axis`}redraw(){let t=this.props,e=this.dom.foreground,s=this.body.dom.top;this._calculateCharSize(),s.appendChild(this.dom.foreground);let i=e.nextSibling;e.parentNode&&e.parentNode.removeChild(e);let r=this.options.showMinorLabels,o=this.options.showMajorLabels;return t.minorLabelHeight=r?t.minorCharHeight:0,t.majorLabelHeight=o?t.majorCharHeight:0,e.style.height=`${this.props.height}px`,this._repaintLabels(),i?s.insertBefore(e,i):s.appendChild(e),this._isResized()}_repaintLabels(){let t,e,s,i,r,o,n,h,d=p()(this.body.range.start).valueOf(),l=p()(this.body.range.end).valueOf(),c=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),u=c-_(this.body.hiddenDates,this.body.range,c);u-=this.body.util.toTime(0).valueOf();let m=new T(new Date(d),new Date(l),u,this.body.hiddenDates,{showMajorLabels:this.options.showMajorLabels,showWeekScale:this.options.showWeekScale});this.step=m;let f=this.dom;f.redundant.lines=f.lines,f.redundant.majorTexts=f.majorTexts,f.redundant.minorTexts=f.minorTexts,f.lines=[],f.majorTexts=[],f.minorTexts=[];let g="",v=0,y=0;for(m.start(),e=m.getCurrent(),i=this.body.util.toScreen(e.valueOf());m.hasNext()&&y<1e3;)y++,r=m.isMajor(),g=m.getClassName(),t=e,s=i,m.next(),e=m.getCurrent(),i=this.body.util.toScreen(e.valueOf()),n=v,v=i-s,o="week"===m.scale||v>=.4*n,this.options.showMinorLabels&&o&&(this._repaintMinorText(s,m.getLabelMinor(t),g).style.width=`${v}px`),r&&this.options.showMajorLabels&&s>0&&(void 0===h&&(h=s),this._repaintMajorText(s,m.getLabelMajor(t),g));if(1e3!==y||O||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),O=!0),this.options.showMajorLabels){let t=this.body.util.toTime(0),e=m.getLabelMajor(t),s=e.length*(this.props.majorCharWidth||10)+10;(void 0===h||s<h)&&this._repaintMajorText(0,e,g)}(0,a.Ed)(this.dom.redundant,t=>{for(;t.length;){let e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})}_repaintMinorText(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",{prefixCls:i}=this.body,r=this.dom.redundant.minorTexts.shift();if(!r){let t=document.createElement("div");(r=document.createElement("div")).appendChild(t),this.dom.foreground.appendChild(r)}let o=r.firstElementChild;return o&&(o.innerHTML=e,o.className=`${i}-tick-text`),r.className=`${i}-tick ${i}-minor ${s}`,this._setXY(r,t,0),this.dom.minorTexts.push(r),r}_repaintMajorText(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",{prefixCls:i}=this.body,r=this.dom.redundant.majorTexts.shift();if(!r){let t=document.createElement("div");(r=document.createElement("div")).appendChild(t),this.dom.foreground.appendChild(r)}let o=r.firstElementChild;return o&&(o.innerHTML=e,o.className=`${i}-tick-text`),r.className=`${i}-tick ${i}-major ${s}`,this._setXY(r,t,0),this.dom.majorTexts.push(r),r}_setXY(t,e,s){t.style.transform=`translate(${e}px, ${s}px)`}destroy(){var t;(null==(t=this.dom.foreground)?void 0:t.parentNode)&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.body=null}_calculateCharSize(){let{prefixCls:t}=this.body;this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("div"),this.dom.measureCharMinor.className=`${t}-text ${t}-minor ${t}-measure`,this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("div"),this.dom.measureCharMajor.className=`${t}-text ${t}-major ${t}-measure`,this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}constructor(t){super(),(0,n._)(this,"body",void 0),(0,n._)(this,"dom",void 0),(0,n._)(this,"props",void 0),(0,n._)(this,"defaultOptions",void 0),(0,n._)(this,"options",void 0),(0,n._)(this,"step",void 0),this.body=t,this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={height:52},this.defaultOptions={maxMinorChars:7,showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1},this.options=(0,a.l7)({},this.defaultOptions),this._create()}}var S=s(8757);let $=(0,s(930).Z)(S.ZP,{preventDefault:"mouse"});function L(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{start:"Date",end:"Date"},s=t.idProp,i=new c.qg({fieldId:s}),r=Object.keys(e),o=(0,c.nk)(t).map(t=>Object.keys(t).reduce((e,s)=>(r.includes(s)?e[s]=p()(t[s]):e[s]=t[s],e),{})).to(i);return o.all().start(),{add:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return t.getDataSet().add(...s)},remove:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return t.getDataSet().remove(...s)},update:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return t.getDataSet().update(...s)},updateOnly:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return t.getDataSet().updateOnly(...s)},clear:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return t.getDataSet().clear(...s)},forEach:i.forEach.bind(i),get:i.get.bind(i),getIds:i.getIds.bind(i),off:i.off.bind(i),on:i.on.bind(i),get length(){return i.length},idProp:s,type:e,rawDS:t,coercedDS:i,dispose:()=>o.stop()}}class N{_create(t){var e,s,i,r;let{prefixCls:o}=this.options;this.dom={},this.dom.container=t,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.root.className=`${o}`,this.dom.background.className=`${o}-panel ${o}-background`,this.dom.top.className=`${o}-panel ${o}-top`,this.dom.centerContainer.className=`${o}-panel ${o}-center`,this.dom.center.className=`${o}-content`,this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.top),this.dom.centerContainer.appendChild(this.dom.center),this.props={root:{},background:{},centerContainer:{},center:{},top:{},scrollTop:0,scrollTopMin:0},this.emitter.on("touch",this._onTouch.bind(this)),this.emitter.on("panmove",this._onDrag.bind(this));let n=this;this.emitter.on("rangechange",()=>{!0===this.initialDrawDone&&this._redraw()}),this.emitter.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.hammer=new $(this.dom.root);let h=this.hammer.get("pinch").set({enable:!0});h&&(h.getTouchAction=function(){return["pan-y"]}),this.hammer.get("pan").set({threshold:5,direction:$.DIRECTION_ALL}),["pinch","tap","pan","panstart","panmove","panend"].forEach(t=>{n.hammer.on(t,e=>{n.isActive()&&n.emitter.emit(t,e)})}),e=this.hammer,(s=t=>{n.emitter.emit("touch",t)}).inputHandler=function(t){t.isFirst&&s(t)},e.on("hammer.input",s.inputHandler),i=this.hammer,(r=t=>{n.emitter.emit("release",t)}).inputHandler=function(t){t.isFinal&&r(t)},i.on("hammer.input",r.inputHandler);let a="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"onmousewheel";if(this.dom.top.addEventListener(a,this.onWheel.bind(this),!1),this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw Error("No container provided");t.appendChild(this.dom.root)}setOptions(t){console.log(t)}getWindow(){let t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}}isActive(){return!0}destroy(){this.dom&&(this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null)}redraw(){this._redraw()}onWheel(t){this.emitter.emit("wheel",t)}_toScreen(t){return function(t,e,s){let i;if(0===t.body.hiddenDates.length)return(e-(i=t.range.conversion(s)).offset)*i.scale;{let r=D(e,t.body.hiddenDates);!0===r.hidden&&(e=r.startDate);let o=k(t.body.hiddenDates,t.range.start,t.range.end);if(e<t.range.start){i=t.range.conversion(s,o);let r=function(t,e,s){let i=0;for(let r=0;r<t.length;r++){let o=t[r].start,n=t[r].end;o>=e&&n<=s&&(i+=n-o)}return i}(t.body.hiddenDates,e,i.offset);return e=p()(e).toDate().valueOf()+r,-(i.offset-e.valueOf())*i.scale}if(!(e>t.range.end))return e=M(t.body.hiddenDates,t.range,e),i=t.range.conversion(s,o),(e.valueOf()-i.offset)*i.scale;{let r={start:t.range.start,end:e};return e=M(t.body.hiddenDates,r,e),i=t.range.conversion(s,o),(e.valueOf()-i.offset)*i.scale}}}(this,t,this.props.center.width)}_redraw(){this.redrawCount++;let t=this.dom;if(!t||!t.container||0===t.root.offsetWidth)return;let e=!1,s=this.options,i=this.props;t.root.style.maxHeight=a.Kw.asSize(s.maxHeight,""),t.root.style.minHeight=a.Kw.asSize(s.minHeight,""),t.root.style.width=a.Kw.asSize(s.width,"");let r=t.root.offsetWidth;i.center.height=t.center.offsetHeight,i.root.height=t.root.offsetHeight,i.centerContainer.height=i.root.height,i.root.width=r,this._setDOM(),this.components.forEach(t=>{e=t.redraw()||e}),e?this.redrawCount<5?this.body.emitter.emit("_change"):console.log("WARNING: infinite loop in redraw?"):this.redrawCount=0,this.body.emitter.emit("changed")}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onDrag(t){if(!t||!this.touch.allowDragging)return;let e=t.deltaY,s=this._getScrollTop();this._setScrollTop(this.touch.initialScrollTop+e)!==s&&this.emitter.emit("verticalDrag")}_getScrollTop(){return this.props.scrollTop}_setScrollTop(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){let t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!==this.props.scrollTopMin&&(this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.props.scrollTop}_setDOM(){let t=this.props,e=this.dom,s=t.root.width;t.top.width=s,t.center.width=s,e.top.style.width=`${t.top.width}px`,e.centerContainer.style.width=`${t.center.width}px`,e.background.style.left="0",e.background.style.top="0",e.top.style.top="0"}_toTime(t){return function(t,e,s){let i=t.range.conversion(s);return new Date(e/i.scale+i.offset)}(this,t,this.props.center.width)}_initAutoResize(){}constructor(){(0,n._)(this,"redrawCount",0),(0,n._)(this,"touch",void 0),(0,n._)(this,"dom",void 0),(0,n._)(this,"body",void 0),(0,n._)(this,"hammer",void 0),(0,n._)(this,"options",{}),(0,n._)(this,"timeAxis",void 0),(0,n._)(this,"emitter",void 0),(0,n._)(this,"range",void 0),(0,n._)(this,"props",void 0),(0,n._)(this,"components",void 0),(0,n._)(this,"initialDrawDone",void 0),(0,n._)(this,"initialRangeChangeDone",void 0)}}class H extends x{setOptions(t){t&&("start"in t||"end"in t)&&this.setRange(t.start,t.end)}setRange(t,e,s,i){s||(s={}),!0!==s.byUser&&(s.byUser=!1);let r=this,o=void 0!==t?p()(t).valueOf():null,n=void 0!==e?p()(e).valueOf():null;if(this.millisecondsPerPixelCache=void 0,this._applyRange(o,n)){let t={start:new Date(this.start),end:new Date(this.end),byUser:s.byUser,event:s.event};if(r.body.emitter.emit("rangechange",t),r.timeoutId&&clearTimeout(r.timeoutId),r.timeoutId=setTimeout(()=>{r.body.emitter.emit("rangechanged",t)},200),i)return i()}}getRange(){return{start:this.start,end:this.end}}zoom(t,e,s,i){null==e&&(e=(this.start+this.end)/2);let r=k(this.body.hiddenDates,this.start,this.end),o=_(this.body.hiddenDates,this,e),n=r-o,h=e-o+(this.start-(e-o))*t,a=e+n+(this.end-(e+n))*t;this.startToFront=!(s>0),this.endToFront=!(-s>0);let d=C(this.body.hiddenDates,h,s,!0),l=C(this.body.hiddenDates,a,-s,!0);(d!==h||l!==a)&&(h=d,a=l),this.setRange(h,a,{animation:!1,byUser:!0,event:i}),this.startToFront=!1,this.endToFront=!0}conversion(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return H.conversion(this.start,this.end,t,e)}_onTouch(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,(0,a.PF)(t)}_onDragStart(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(t){if(!t||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;let e=t.deltaX;e-=this.deltaDifference;let s=this.props.touch.end-this.props.touch.start;s-=k(this.body.hiddenDates,this.start,this.end);let i=e/this.body.domProps.center.width*s,r=this.props.touch.start+i,o=this.props.touch.end+i,n=C(this.body.hiddenDates,r,this.previousDelta-e,!0),h=C(this.body.hiddenDates,o,this.previousDelta-e,!0);if(n!==r||h!==o){this.deltaDifference+=e,this.props.touch.start=n,this.props.touch.end=h,this._onDrag(t);return}this.previousDelta=e,this._applyRange(r,o);let a=new Date(this.start),d=new Date(this.end);this.body.emitter.emit("rangechange",{start:a,end:d,byUser:!0,event:t})}_onDragEnd(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:t}))}_onWheel(t){let e=0;if((t.wheelDelta?e=t.wheelDelta/120:t.detail?e=-t.detail/3:t.deltaY&&(e=-t.deltaY/3),this.options.zoomable&&this.options.moveable)&&this._isInsideRange(t)&&e){let s,i=this.options.zoomFriction||5;s=e<0?1-e/i:1/(1+e/i);let r=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center),o=this._pointerToDate(r);this.zoom(s,o,e,t),t.preventDefault()}}getPointer(t,e){let s=e.getBoundingClientRect();return{x:t.x-s.left,y:t.y-s.top}}_pointerToDate(t){return this.body.util.toTime(t.x).valueOf()}_onPinch(t){this.options.zoomable&&this.options.moveable&&((0,a.PF)(t),this.props.touch.allowDragging=!1)}_isInsideRange(t){let e=(t.center?t.center.x:t.clientX)-this.body.dom.centerContainer.getBoundingClientRect().left,s=this.body.util.toTime(e).valueOf();return s>=this.start&&s<=this.end}_applyRange(t,e){let s,i=null!==t?p()(t).valueOf():this.start,r=null!==e?p()(e).valueOf():this.end,o=null!=this.options.max?p()(this.options.max).valueOf():null,n=null!=this.options.min?p()(this.options.min).valueOf():null;if(Number.isNaN(i)||null===i)throw Error(`Invalid start '${t}'`);if(Number.isNaN(r)||null===r)throw Error(`Invalid end '${e}'`);if(r<i&&(r=i),null!==n&&i<n&&(s=n-i,i+=s,r+=s,null!=o&&r>o&&(r=o)),null!==o&&r>o&&(i-=s=r-o,r-=s,null!=n&&i<n&&(i=n)),null!==this.options.zoomMin){let t=this.options.zoomMin;t<0&&(t=0),r-i<t&&(this.end-this.start===t&&i>=this.start-.5&&r<=this.end?(i=this.start,r=this.end):(s=t-(r-i),i-=s/2,r+=s/2))}if(null!==this.options.zoomMax){let t=this.options.zoomMax;t<0&&(t=0),r-i>t&&(this.end-this.start===t&&i<this.start&&r>this.end?(i=this.start,r=this.end):(s=r-i-t,i+=s/2,r-=s/2))}let h=this.start!==i||this.end!==r;return this.start=i,this.end=r,h}static conversion(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0!==s&&e-t!=0?{offset:t,scale:s/(e-t-i)}:{offset:0,scale:1}}constructor(t,e){super(),(0,n._)(this,"body",void 0),(0,n._)(this,"millisecondsPerPixelCache",void 0),(0,n._)(this,"start",void 0),(0,n._)(this,"end",void 0),(0,n._)(this,"defaultOptions",void 0),(0,n._)(this,"options",void 0),(0,n._)(this,"props",void 0),(0,n._)(this,"timeoutId",void 0),(0,n._)(this,"startToFront",void 0),(0,n._)(this,"endToFront",void 0),(0,n._)(this,"deltaDifference",void 0),(0,n._)(this,"previousDelta",void 0),(0,n._)(this,"scaleOffset",void 0);let s=p()().startOf("day"),i=s.clone().add(-3,"days").valueOf(),r=s.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,void 0===e?(this.start=i,this.end=r):(this.start=e.start||i,this.end=e.end||r),this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={start:null,end:null,min:null,max:null,moveable:!0,zoomable:!0,zoomMin:10,zoomMax:31536e10},this.props={touch:{}},this.options=Object.assign({},this.defaultOptions),this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("wheel",this._onWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this))}}class Y extends N{setOptions(t){N.prototype.setOptions.call(this,t)}setItems(t){let e;this.itemsDone=!1,e=t?!function(t){if(!t)return!1;let e=t.idProp??t._idProp;return!!e&&(0,c.L2)(e,t)}(t)?L(new c.qg(t)):L(t):null,this.itemsData&&this.itemsData.dispose(),this.itemsData=e}_redraw(){N.prototype._redraw.call(this)}constructor(t,e,s){super(),(0,n._)(this,"defaultOptions",void 0),(0,n._)(this,"itemsDone",void 0),(0,n._)(this,"initialFitDone",void 0),(0,n._)(this,"itemsData",void 0),this.itemsDone=!1,this.emitter=(0,l.Z)();let i=this;this.defaultOptions={prefixCls:"pansy-timeline",minHeight:500,hiddenDates:[]},this.options=(0,d.T)({},this.defaultOptions),this._create(t),this.components=[],this.body={prefixCls:this.options.prefixCls,dom:this.dom,domProps:this.props,emitter:this.emitter,hiddenDates:[],util:{toTime:i._toTime.bind(i),toScreen:i._toScreen.bind(i)}},this.range=new H(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new j(this.body),this.components.push(this.timeAxis),this.initialFitDone=!1,this.emitter.on("changed",()=>{null!==i.itemsData&&(i.initialFitDone||(i.initialFitDone=!0),i.initialDrawDone||!i.initialRangeChangeDone&&(i.options.start||i.options.end)||(i.initialDrawDone=!0,i.dom.root.style.visibility="visible",i.options.onInitialDrawComplete&&setTimeout(()=>i.options.onInitialDrawComplete(),0)))}),s&&this.setOptions(s),e&&this.setItems(e),this._redraw()}}class E{setOptions(t){this.options=(0,a.l7)({},this.options,t)}constructor(t){(0,n._)(this,"timeline",void 0),(0,n._)(this,"options",void 0),(0,n._)(this,"items",void 0),(0,n._)(this,"_didMount",()=>{let{getElement:t}=this.options,e=null==t?void 0:t();return e&&(this.timeline=new Y(e,this.items,this.options)),()=>{this.timeline&&this.timeline.destroy()}}),(0,n._)(this,"_willUpdate",()=>{this.timeline&&((0,h.X)(this.items,this.options.data)||(this.items=this.options.data,this.timeline.setItems(this.options.data||[])))}),this.items=t.data||[],this.setOptions(t)}}function R(t){let{className:e,style:s,...n}=t,h=r.useRef(null),a={...n,getElement:()=>h.current},[d]=r.useState(()=>new E(a));return d.setOptions(a),o(()=>d._didMount(),[]),o(()=>d._willUpdate()),(0,i.jsx)("div",{className:e,style:s,ref:h})}s(8053);var W=s(1234);let z=function(){let[t]=r.useState([]);return(0,i.jsxs)("div",{style:{padding:24,background:"#0000001d"},children:[(0,i.jsx)(W.default,{}),(0,i.jsx)("br",{}),(0,i.jsx)(R,{data:t})]})}}}]);